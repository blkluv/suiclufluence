import { cn } from "@/lib/utils";
import { ReactNode } from "react";

interface WalrusLoadingProps {
  size?: number;
  message?: string;
  showMessage?: boolean;
  className?: string;
  isLoading?: boolean;
  children: ReactNode;
}

export const WalrusLoading = ({
  size = 120,
  message = "Uploading to Walrus...",
  showMessage = true,
  className,
  isLoading = false,
  children,
}: WalrusLoadingProps) => {
  const content = (
    <div
      className={cn("flex flex-col items-center justify-center p-8", className)}
    >
      <div className="relative">
        {/* Main Walrus SVG with animations */}
        <div
          className="animate-bounce drop-shadow-glow"
          style={{
            width: size,
            height: size,
          }}
        >
          <svg
            width={size}
            height={size}
            viewBox="0 0 900 900"
            className="w-full h-full"
          >
            {/* Background circle with theme colors */}
            <circle
              cx="450"
              cy="450"
              r="430"
              fill="var(--primary)"
              className="origin-center animate-pulse opacity-20"
            />

            {/* Walrus SVG with theme-aware coloring */}
            <g
              transform="translate(0,900) scale(0.1,-0.1)"
              className="animate-pulse"
              style={{ animationDelay: "0.2s" }}
            >
              <path
                d="M3980 8129 c-377 -60 -712 -381 -823 -789 -35 -128 -76 -406 -106
-725 -5 -49 -14 -119 -20 -155 -6 -36 -15 -110 -22 -165 -6 -55 -17 -149 -25
-210 -8 -60 -18 -148 -23 -195 -5 -47 -14 -112 -20 -145 -11 -59 -60 -393 -69
-470 -6 -53 -15 -62 -65 -68 -49 -5 -170 -40 -242 -69 -104 -42 -122 -50 -186
-83 -64 -33 -77 -40 -175 -100 -82 -49 -202 -145 -300 -238 -236 -224 -354
-467 -354 -727 0 -269 133 -521 325 -616 72 -36 75 -36 167 -31 105 5 147 22
224 90 l46 41 18 -24 c9 -12 29 -46 44 -75 29 -57 101 -145 119 -145 7 -1 25
-11 41 -24 28 -23 29 -26 22 -83 -18 -147 -37 -340 -46 -473 -6 -80 -14 -169
-20 -199 -5 -30 -10 -71 -10 -91 0 -22 -17 -70 -44 -125 -69 -144 -81 -187
-81 -300 0 -113 12 -151 77 -245 42 -61 99 -113 203 -185 128 -88 295 -213
326 -244 9 -9 54 -46 100 -83 46 -36 138 -109 204 -162 106 -85 151 -114 230
-146 59 -24 163 -30 527 -30 437 0 427 -1 476 73 26 40 27 48 27 167 0 94 -4
136 -16 165 -9 22 -25 60 -35 85 -10 25 -30 64 -46 88 -15 24 -28 46 -28 50 0
4 -18 27 -41 52 -55 62 -64 79 -45 86 9 3 30 1 48 -6 106 -37 452 -51 633 -25
95 14 119 19 245 52 53 13 181 59 248 89 39 17 62 6 93 -44 12 -18 35 -50 52
-71 18 -21 50 -62 72 -91 22 -29 54 -69 70 -89 17 -20 46 -57 65 -81 168 -209
339 -382 406 -411 106 -48 245 -35 378 35 104 55 182 115 276 213 118 123 264
311 290 372 6 13 21 38 33 55 12 17 27 40 33 52 6 11 27 50 47 86 55 100 116
254 138 347 18 77 18 88 5 135 -16 55 -49 92 -106 122 -50 26 -239 26 -330 1
-36 -10 -83 -24 -105 -30 -22 -6 -80 -26 -129 -45 -60 -23 -91 -31 -98 -24 -6
6 -16 32 -23 59 -8 26 -28 93 -45 148 -18 55 -46 145 -63 200 l-30 99 23 71
c12 38 27 84 32 100 27 84 49 198 64 341 17 150 17 165 0 323 -16 155 -31 236
-58 321 -6 19 -15 49 -19 65 -4 17 -17 55 -28 85 -12 30 -21 56 -21 57 0 2 30
18 68 36 175 87 280 154 414 267 214 178 330 346 394 570 27 93 27 330 0 415
-59 187 -144 298 -281 368 -52 26 -73 31 -155 35 -91 4 -99 3 -165 -29 -39
-17 -86 -45 -106 -61 -20 -15 -39 -28 -43 -28 -3 0 -28 46 -56 103 -57 115
-112 180 -178 208 -56 24 -86 23 -142 -4 -70 -35 -86 -74 -94 -237 -9 -196
-34 -276 -109 -353 -74 -77 -214 -156 -284 -160 -43 -2 -42 -7 -68 198 -9 72
-23 159 -31 195 -20 92 -22 175 -3 197 47 57 54 91 56 282 1 101 4 186 7 188
13 13 153 -90 252 -187 80 -78 112 -88 140 -45 15 23 15 27 -4 57 -39 63 -210
202 -379 308 -49 31 -64 47 -73 77 -6 21 -18 52 -25 68 -7 17 -16 41 -20 54
-7 22 -6 23 36 16 24 -4 58 -13 74 -20 17 -7 59 -23 95 -35 36 -13 69 -27 74
-32 6 -4 16 -8 24 -8 8 0 48 -20 89 -46 60 -35 83 -44 112 -42 34 3 36 5 39
39 3 34 0 39 -50 71 -106 68 -242 124 -463 188 -115 34 -133 42 -155 71 -14
19 -55 64 -92 102 -38 37 -68 72 -68 77 0 5 9 12 20 15 11 4 29 23 40 44 18
35 18 42 5 92 -8 30 -15 66 -15 81 0 44 -31 151 -53 182 l-20 29 -139 -6 -139
-5 -10 26 c-6 15 -24 54 -41 87 -204 403 -606 628 -1008 564z m270 -109 c102
-20 128 -28 185 -57 33 -17 76 -39 95 -49 79 -40 185 -137 276 -250 40 -51
118 -209 109 -223 -3 -6 -19 -11 -35 -11 -32 0 -114 -33 -125 -50 -5 -8 -15
-6 -33 7 -23 15 -46 18 -152 16 -69 -1 -192 -10 -275 -18 -145 -16 -222 -36
-340 -90 -16 -8 -84 -35 -150 -60 -66 -26 -129 -51 -140 -55 -11 -5 -60 -25
-110 -45 -49 -20 -107 -44 -129 -53 -52 -22 -89 -61 -120 -126 -53 -113 -50
-185 9 -200 41 -10 62 9 106 100 40 82 45 88 93 109 92 41 87 43 129 -38 20
-39 37 -77 37 -84 0 -6 14 -23 32 -38 23 -19 38 -25 57 -20 31 7 150 41 208
60 23 7 44 11 46 8 3 -2 -16 -35 -43 -71 -72 -101 -130 -221 -170 -357 -18
-62 -26 -74 -67 -105 -86 -64 -220 -206 -257 -273 -43 -76 -44 -91 -11 -113
36 -24 65 -8 102 55 35 61 159 201 178 201 11 0 15 -28 18 -122 2 -68 9 -153
17 -190 l13 -66 -36 -59 c-88 -146 -111 -235 -65 -252 40 -15 56 -1 97 85 23
47 48 87 57 91 12 4 30 -8 61 -45 46 -54 133 -117 176 -127 14 -4 32 -14 39
-22 13 -16 75 -187 84 -233 3 -14 9 -34 14 -45 14 -36 80 -292 80 -313 0 -12
4 -31 9 -44 5 -13 19 -77 30 -143 12 -66 26 -142 32 -170 13 -57 17 -89 53
-420 15 -132 31 -278 37 -325 6 -47 15 -159 20 -250 19 -345 26 -401 56 -444
46 -65 76 -81 147 -81 53 0 68 4 99 28 21 16 48 49 61 75 32 65 65 285 85 572
5 69 14 161 20 205 20 160 34 650 29 1020 -3 204 -9 378 -13 387 -4 10 1 24
16 39 21 21 23 21 35 4 7 -10 25 -54 39 -99 14 -45 30 -94 36 -111 12 -32 13
-39 54 -210 14 -60 32 -135 39 -165 17 -67 41 -199 61 -345 9 -60 20 -139 26
-175 6 -36 15 -110 20 -165 57 -624 80 -802 112 -848 75 -109 198 -115 273
-14 57 77 76 218 96 717 10 280 -1 880 -17 923 -14 34 32 17 91 -35 257 -225
471 -515 557 -754 18 -49 55 -159 67 -199 30 -101 50 -272 50 -437 0 -301 -52
-522 -186 -790 -45 -91 -55 -107 -86 -149 -16 -20 -28 -40 -28 -45 0 -4 -7
-14 -15 -23 -8 -9 -42 -51 -76 -93 -64 -83 -203 -215 -309 -295 -151 -114
-343 -213 -545 -278 -123 -41 -169 -52 -310 -75 -67 -11 -343 -11 -430 0 -105
13 -197 29 -225 40 -14 4 -59 19 -100 31 -41 12 -82 25 -90 29 -8 4 -50 24
-93 45 -92 44 -89 29 -37 210 64 224 64 223 46 250 -32 49 -79 25 -100 -50 -7
-27 -24 -84 -36 -125 -12 -41 -29 -100 -37 -130 -8 -30 -19 -71 -25 -91 -5
-20 -9 -44 -7 -54 2 -10 63 -60 134 -111 138 -99 235 -186 301 -270 44 -56
115 -194 135 -263 20 -67 17 -182 -4 -215 l-18 -27 -412 4 c-359 3 -417 5
-455 20 -49 20 -83 40 -128 77 -17 14 -60 47 -95 75 -35 27 -66 52 -69 55 -4
5 -136 113 -184 150 -6 5 -27 22 -46 38 -50 41 -308 232 -355 264 -122 81
-185 184 -185 303 0 51 26 164 41 180 5 5 9 15 9 23 0 8 13 36 29 62 33 53 61
173 61 259 0 31 6 115 15 186 8 72 24 222 36 335 12 112 26 212 32 221 6 10
21 22 33 28 13 6 30 24 39 41 22 43 55 150 55 182 0 28 36 199 49 233 52 137
143 242 232 268 30 9 81 19 113 23 84 10 122 56 80 98 -18 19 -54 19 -149 2
-160 -29 -278 -128 -353 -296 -43 -96 -48 -116 -91 -372 -15 -91 -62 -126
-126 -95 -37 18 -85 86 -146 209 -37 74 -68 108 -97 108 -7 0 -48 -35 -90 -77
-111 -112 -177 -133 -289 -91 -106 39 -211 173 -257 327 -34 115 -30 326 9
439 30 87 97 204 159 282 41 50 232 233 268 256 20 13 39 28 43 34 6 9 270
170 279 170 3 0 33 13 68 29 147 68 294 108 461 126 120 13 159 13 300 0 89
-8 178 -18 197 -24 19 -5 71 -20 115 -32 44 -12 87 -25 95 -29 27 -13 124 -61
171 -86 37 -20 51 -23 73 -15 21 9 26 17 26 45 0 31 -5 37 -67 74 -38 23 -86
48 -108 57 -22 9 -54 23 -72 31 -36 16 -190 55 -298 75 -38 7 -149 16 -245 19
l-175 5 3 50 c2 28 7 73 13 100 11 60 36 246 49 368 5 48 12 92 14 96 3 4 12
68 21 142 39 316 46 379 54 464 5 50 14 122 20 160 6 39 17 129 26 200 8 72
20 166 26 210 6 44 14 107 18 140 4 33 13 76 19 95 6 19 19 60 28 90 75 250
275 484 509 594 22 10 47 22 56 27 14 6 94 27 164 42 36 8 199 6 245 -3z m914
-671 c17 -26 11 -40 -77 -176 -27 -43 -51 -52 -91 -37 -24 9 -20 26 26 100 82
137 110 158 142 113z m-636 -41 c26 -26 17 -47 -71 -180 -54 -80 -63 -88 -109
-104 -53 -17 -83 -9 -53 16 8 7 15 16 15 21 0 5 20 38 45 75 25 36 45 67 45
70 0 6 40 64 64 92 22 24 46 28 64 10z m672 -340 c205 -108 370 -378 414 -680
38 -252 4 -398 -109 -463 -63 -37 -160 -65 -227 -65 -68 0 -148 19 -148 36 0
6 15 37 68 85 89 137 76 177 76 295 0 74 -4 110 -17 136 -21 44 -55 55 -84 29
-18 -16 -20 -26 -14 -69 19 -126 8 -209 -38 -303 -74 -151 -231 -271 -461
-350 -69 -25 -112 -33 -200 -37 -203 -12 -322 25 -422 131 -61 63 -72 95 -48
133 22 33 179 190 262 261 69 60 76 84 31 109 -41 23 -73 3 -215 -134 -122
-118 -144 -135 -144 -117 0 4 -4 35 -9 68 -13 91 8 269 34 289 21 16 124 67
218 109 61 27 73 42 63 80 -12 47 -56 43 -183 -15 -34 -16 -65 -29 -68 -29 -9
0 4 59 23 100 66 148 177 276 284 328 104 51 208 75 323 76 118 1 143 -9 245
-99 108 -95 139 -115 181 -115 29 0 43 6 63 31 24 28 26 38 26 130 0 98 0 99
24 99 14 0 52 -15 86 -32z m1213 -1107 c35 -39 63 -92 107 -201 12 -30 33 -70
47 -87 35 -48 63 -44 135 22 93 84 152 109 251 106 87 -2 186 -61 245 -148 35
-50 82 -150 82 -173 0 -12 5 -31 11 -42 17 -31 13 -232 -6 -308 -24 -94 -98
-242 -165 -330 -113 -149 -329 -318 -539 -423 -104 -52 -127 -57 -136 -26 -4
12 -36 69 -71 128 -66 111 -165 239 -268 349 -68 71 -269 253 -323 291 -31 23
-34 28 -31 70 l3 46 45 6 c93 13 242 98 331 189 97 98 139 217 139 392 0 72 5
120 14 143 14 32 19 35 54 35 33 0 45 -6 75 -39z m-851 -181 c42 -210 89 -623
110 -985 31 -515 -3 -1310 -60 -1407 -18 -31 -48 -44 -79 -34 -26 8 -53 58
-53 97 0 19 -6 81 -14 139 -8 58 -22 182 -31 275 -46 496 -93 826 -150 1065
-7 30 -21 89 -30 130 -16 70 -22 95 -59 218 -8 26 -24 81 -36 122 -13 41 -26
79 -31 85 -17 17 -9 35 33 81 23 25 58 77 79 117 l37 72 64 6 c34 3 90 17 123
31 76 33 88 31 97 -12z m-414 -36 c5 -38 -126 -184 -165 -184 -19 0 -50 155
-35 178 5 7 28 25 53 41 l44 28 50 -22 c33 -14 51 -28 53 -41z m-289 -187 c33
-304 36 -1071 5 -1410 -8 -86 -14 -183 -14 -215 0 -32 -6 -107 -14 -167 -8
-61 -22 -180 -31 -265 -9 -85 -24 -175 -32 -200 -30 -86 -78 -113 -121 -67
-31 33 -42 78 -42 172 0 44 -5 121 -10 170 -6 50 -15 155 -20 235 -5 80 -13
188 -19 240 -6 52 -18 156 -26 230 -24 214 -57 417 -102 635 -14 66 -29 138
-33 160 -8 40 -58 223 -78 286 -7 19 -21 62 -32 97 -31 95 -33 92 68 92 123 0
317 46 422 101 63 33 65 31 79 -94z m1609 -2908 c2 -13 7 -33 11 -44 5 -11 25
-74 46 -140 20 -66 41 -130 46 -143 12 -31 10 -33 -71 -87 -38 -25 -80 -59
-94 -76 -24 -29 -25 -32 -11 -60 20 -37 47 -37 94 0 54 42 162 107 223 132 29
12 58 26 63 29 18 13 208 73 260 82 28 5 89 12 136 15 74 4 92 2 128 -16 40
-21 41 -22 41 -74 0 -47 -15 -104 -54 -212 -15 -42 -94 -198 -142 -281 -114
-199 -327 -451 -465 -551 -100 -73 -183 -107 -277 -111 -64 -3 -88 0 -107 12
-25 17 -34 59 -15 71 6 3 10 15 10 25 0 18 87 141 164 233 124 147 302 301
501 434 122 82 145 101 145 124 0 24 -47 59 -68 52 -19 -8 -183 -115 -257
-170 -75 -55 -266 -217 -300 -255 -140 -152 -233 -273 -271 -348 -14 -28 -31
-50 -38 -50 -18 0 -215 227 -351 405 -38 50 -93 120 -123 158 -60 74 -60 82 2
114 32 17 197 123 206 132 3 3 28 24 55 45 170 135 330 324 458 540 29 50 50
56 55 15z"
                fill="hsl(var(--foreground))"
                stroke="none"
              />
            </g>
          </svg>
          {/* Primary loading ring - matches theme primary color */}
          <div className="absolute inset-0 flex items-center justify-center">
            <div
              className="rounded-full border-4 border-transparent border-t-primary animate-spin"
              style={{
                width: size + 20,
                height: size + 20,
              }}
            ></div>
          </div>

          {/* Secondary spinning ring - uses accent color */}
          <div className="absolute inset-0 flex items-center justify-center">
            <div
              className="rounded-full border-2 border-transparent border-b-primary/60 animate-spin"
              style={{
                width: size + 40,
                height: size + 40,
                animationDirection: "reverse",
                animationDuration: "3s",
              }}
            ></div>
          </div>
        </div>

        {/* Theme-aware floating particles */}
        <div className="absolute top-4 left-4 w-2 h-2 bg-primary/70 rounded-full animate-ping"></div>
        <div
          className="absolute top-8 right-6 w-1.5 h-1.5 bg-primary/50 rounded-full animate-ping"
          style={{ animationDelay: "0.5s" }}
        ></div>
        <div
          className="absolute bottom-6 left-8 w-1 h-1 bg-primary/60 rounded-full animate-ping"
          style={{ animationDelay: "1s" }}
        ></div>
        <div
          className="absolute bottom-4 right-4 w-1.5 h-1.5 bg-primary/40 rounded-full animate-ping"
          style={{ animationDelay: "1.5s" }}
        ></div>
        <div
          className="absolute top-12 left-12 w-1 h-1 bg-primary/50 rounded-full animate-ping"
          style={{ animationDelay: "2s" }}
        ></div>
      </div>

      {/* Theme-aware loading message */}
      {showMessage && (
        <div className="mt-6 text-center">
          <p className="text-lg font-medium text-foreground mb-2">{message}</p>
        </div>
      )}
    </div>
  );

  return (
    <div>
      {isLoading && (
        <div className="fixed inset-0 z-999 flex items-center justify-center bg-background/80 backdrop-blur-sm">
          {content}
        </div>
      )}
      {children}
    </div>
  );
};
